<!-- Hero Photo Wall - Horizontal Scrolling Gallery -->
<div class="hero-photo-wall" {% if page.overlay_image %}{% if jekyll.environment == "production" %}style="background-image: url('/_vercel/image?url={{ page.overlay_image }}&w=1080&q=75');"{% else %}style="background-image: url('{{ page.overlay_image }}');"{% endif %}{% endif %}>
  <div class="hero-photo-wall__container">
    <div class="hero-photo-wall__scroll">

      {% for photo in page.photo_wall %}
      <!-- Photo Card {{ forloop.index }} -->
      <div class="photo-card" style="--rotation: {{ photo.rotation }}; --offset-y: {{ photo.offset }};">
        <div class="photo-card__inner">
          {% if jekyll.environment == "production" %}
          <img src="/_vercel/image?url={{ photo.image }}&w=1080&q=75" alt="{{ photo.caption }}">
          {% else %}
          <img src="{{ photo.image }}" alt="{{ photo.caption }}">
          {% endif %}
          <div class="photo-card__caption">{{ photo.caption }}</div>
        </div>
      </div>
      {% endfor %}

    </div>
  </div>

  <!-- Scroll Hint -->
  <div class="hero-photo-wall__hint">
    <span>← Scroll to explore →</span>
  </div>
</div>

<!-- Photo Wall Scroll Enhancement Script -->
<script>
(function() {
  const scrollContainer = document.querySelector('.hero-photo-wall__scroll');
  if (!scrollContainer) return;

  let isDown = false;
  let startX;
  let scrollLeft;

  // 鼠标拖拽滚动
  scrollContainer.addEventListener('mousedown', (e) => {
    isDown = true;
    scrollContainer.style.cursor = 'grabbing';
    scrollContainer.style.userSelect = 'none';
    startX = e.pageX - scrollContainer.offsetLeft;
    scrollLeft = scrollContainer.scrollLeft;
  });

  scrollContainer.addEventListener('mouseleave', () => {
    isDown = false;
    scrollContainer.style.cursor = 'grab';
  });

  scrollContainer.addEventListener('mouseup', () => {
    isDown = false;
    scrollContainer.style.cursor = 'grab';
  });

  scrollContainer.addEventListener('mousemove', (e) => {
    if (!isDown) return;
    e.preventDefault();
    const x = e.pageX - scrollContainer.offsetLeft;
    const walk = (x - startX) * 2; // 滚动速度倍数
    scrollContainer.scrollLeft = scrollLeft - walk;
  });

  // 鼠标滚轮横向滚动
  scrollContainer.addEventListener('wheel', (e) => {
    e.preventDefault();
    scrollContainer.scrollLeft += e.deltaY;
  }, { passive: false });

  // 初始化鼠标样式
  scrollContainer.style.cursor = 'grab';
})();
</script>
