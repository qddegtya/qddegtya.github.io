<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="format-detection" content="telephone=no, email=no" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" /><!-- 删除苹果默认的工具栏和菜单栏 -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black" /><!-- 设置苹果工具栏颜色 -->
    <meta name="format-detection" content="telphone=no, email=no" /><!-- 忽略页面中的数字识别为电话，忽略email识别 -->
    <!-- 启用360浏览器的极速模式(webkit) -->
    <meta name="renderer" content="webkit">
    <!-- 避免IE使用兼容模式 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- 针对手持设备优化，主要是针对一些老的不识别viewport的浏览器，比如黑莓 -->
    <meta name="HandheldFriendly" content="true">
    <!-- 微软的老式浏览器 -->
    <meta name="MobileOptimized" content="320">
    <!-- uc强制竖屏 -->
    <meta name="screen-orientation" content="portrait">
    <!-- QQ强制竖屏 -->
    <meta name="x5-orientation" content="portrait">
    <!-- UC强制全屏 -->
    <meta name="full-screen" content="yes">
    <!-- QQ强制全屏 -->
    <meta name="x5-fullscreen" content="true">
    <!-- UC应用模式 -->
    <meta name="browsermode" content="application">
    <!-- QQ应用模式 -->
    <meta name="x5-page-mode" content="app">
    <!-- windows phone 点击无高光 -->
    <meta name="msapplication-tap-highlight" content="no">
    <!-- 适应移动端end -->
    <title>SVG+JS实现新版手机QQ的手势消除红点消息的动画 - Archer's Blog</title>
    <link rel="stylesheet" href="/assets/css/font-awesome-4.2.0/css/font-awesome.min.css?ver=1.0.34"/>
    <link rel="stylesheet" href="/assets/css/theme.css?ver=1.0.34"/>
    <script src="http://cdn.staticfile.org/jquery/2.1.1/jquery.min.js?ver=1.0.34"></script>
    <script src="/assets/js/archer.js?ver=1.0.34"></script>
    <script type="text/javascript">

        //Html编码获取Html转义实体
        function htmlEncode(value){
            return $('<div/>').text(value).html();
        }

        //Html解码获取Html实体
        function htmlDecode(value){
            return $('<div/>').html(value).text();
        }

        $(document).ready(function(){

//            $.getJSON("/ad.json", function(data){
//                $(".side_nav_topic").html("<i class='fa fa-plug'></i> " +
//                "<a href='" + data.url + "'>" + data.title + "</a>");
//            });

            //缓存分类文章列表
            var catposts = [];

            //首次载入便缓存下来
            if('' !== '首页'){

                $.getJSON("/allposts.json", function (data) {

                    $.each(data, function (i, item) {
                        if(item.cat === ''){
                            catposts.push(item);
                        }
                    });

                    //添加
                    $.each(catposts, function(j, item){
                        var content = "";
                        if(j < 0){
                            var excerpt = " + item.excerpt + ";
                            content += "<div class='blogbody__everyblog'>";
                            content += "<div class='blogbody__everyblog__header'>";
                            content += "<a href='" + item.url + "'>" + item.title + "</a>";
                            content += "</div>";
                            content += "<div class='blogbody__everyblog__meta'>";
                            content += "<span class='blogbody__everyblog__metainfo'>" + item.date + "</span>";
                            content += "</div>";
                            content += "<div class='blogcontent blogbody__everyblog__excerpt'>";
                            content += htmlDecode(item.excerpt);
                            content += "</div>";
                            content += "</div>";
                            $('.loadingmore').before(content);
                        }
                    });
                });
            }

            var totalsize = 0;

            
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            

            if(totalsize > 0){

                var bloglists = $('.bloglists');
                var count = 0; //一开始的文章数目
                var looptimes = 0; //计数器top

                $('.loadingmore').click(function () {

                    $('.loadingmore').html("<span class='loadingmorespan'><i class='fa fa-spinner fa-spin fa-fw'></i> 正在加载...</span>");

                    $.getJSON("/allposts.json", function (data) {
                        var content = "";
                        looptimes = count + 0; //初始化
                        var j = 0; //采集loop了多少次

                        if('' === '首页'){
                            $.each(data, function (i, item) {
                                if (i >= count && i < looptimes) {
                                    var excerpt = " + item.excerpt + ";
                                    content += "<div class='blogbody__everyblog'>";
                                    content += "<div class='blogbody__everyblog__header'>";
                                    content += "<a href='" + item.url + "'>" + item.title + "</a>";
                                    content += "</div>";
                                    content += "<div class='blogbody__everyblog__meta'>";
                                    content += "<span class='blogbody__everyblog__metainfo'>" + item.date + "</span>";
                                    content += "</div>";
                                    content += "<div class='blogcontent blogbody__everyblog__excerpt'>";
                                    content += htmlDecode(item.excerpt);
                                    content += "</div>";
                                    content += "</div>";
                                    j++;
                                }
                            });

                            count += j; //现在的文章数目

                            $('.loadingmore').before(content);
                            $('.loadingmore').html("<span class='loadingmorespan'><i class='fa fa-book fa-lg'></i> 阅读更多文章</span>");
                            if (count == data.length) {
                                $('.loadingmore').html("<span class='loadingmorespan'>没有更多了...</span>").hide();
                            }

                        }
                        else{
                            $.each(catposts, function (i, item) {
                                if (i >= count && i < looptimes) {
                                    var excerpt = " + item.excerpt + ";
                                    content += "<div class='blogbody__everyblog'>";
                                    content += "<div class='blogbody__everyblog__header'>";
                                    content += "<a href='" + item.url + "'>" + item.title + "</a>";
                                    content += "</div>";
                                    content += "<div class='blogbody__everyblog__meta'>";
                                    content += "<span class='blogbody__everyblog__metainfo'>" + item.date + "</span>";
                                    content += "</div>";
                                    content += "<div class='blogcontent blogbody__everyblog__excerpt'>";
                                    content += htmlDecode(item.excerpt);
                                    content += "</div>";
                                    content += "</div>";
                                    j++;
                                }
                            });

                            count += j; //现在的文章数目
                            $('.loadingmore').before(content);
                            $('.loadingmore').html("<span class='loadingmorespan'><i class='fa fa-book fa-lg'></i> 阅读更多文章</span>");
                            if (count === catposts.length) {
                                $('.loadingmore').html("<span class='loadingmorespan'>没有更多了...</span>").hide();
                            }
                        }
                    });
                });
            }

            //如果totalsize<=初始值则不显示
            else{
                //否则不显示翻页
                $('.loadingmore').css('display', 'none');
            }
        });
    </script>

</head>

<!-- 手机导航 -->
<header id="mobile--header" class="mobile--header">
    <span class="mobile__nav--open" id="navopen"><i class="fa fa-bars"></i></span>
    <span class="mobile--header--span"><a href="/">Archer's Blog</a></span>
</header>

<!-- 手机导航侧栏蒙板 -->
<div id="side_nav_bg" class="side_nav_bg">
</div>

<!-- 手机侧栏导航 -->
<div id="side_nav" class="side_nav">
    <!-- 头像位置 -->
    <!--<div class="side_nav_gravatar">-->
        <!--<div class="img_avatar">-->
            <!--<img src="/assets/images/avatar.jpeg" alt="Archer"/>-->
        <!--</div>-->
    <!--</div>-->

    <!-- 公告区域 -->
    <div class="side_nav_ads">
        <span class="side_nav_topic">
            <a href="/" title="Archer's Blog">WEB DEVELOPER</a>
        </span>
    </div>

    <!-- 菜单区域 -->
    <div class="side_nav_ul">
            <a href="/">首页</a>
            <a href="/blogs">博客</a>
            <a href="/projects">项目</a>
            <a href="/experiments">实验</a>
            <a href="/tools">工具</a>
            <a href="/about">关于</a>
    </div>

    <!-- 关闭 -->
    <!--<div class="side_nav_close" id="close_nav">-->
        <!--<i class="fa fa-close"></i>-->
    <!--</div>-->
</div>

<header id="blog__header">



    <div class="blog__bighead">

        <div id="follow--pop--area" class="follow--pop bounceInDown">
            <span class="follow--list"><a href="http://www.weibo.com/IMArcher" target="_blank" title="Weibo"><i class="fa fa-weibo fa-color"></i></a> <a href="http://github.com/qddegtya" target="_blank" title="Github"><i class="fa fa-github fa-color"></i></a> <a href="/about" title="About"><i class="fa fa-coffee fa-color"></i></a> <i></i></span>
        </div>

        <!-- github ribbon -->
        <a href="https://github.com/qddegtya/qddegtya.github.io" target="_blank" id="ribbon--github"><img style="position: absolute; top: 100px; left: 0px; border: 0;" src="http://xiaoa.name/assets/images/ribbon.png" alt="Fork me on GitHub"></a>

        <div class="blog__head__img">
            <span class="logo--name bounceInDown"><a href="/">ARCHER</a></span>
            <span class="logo--des">WEB DEVELOPER</span>
        </div>
    </div>

    <!-- blog nav -->
    <div class="blog__nav">
        <ul class="blog__nav__ul">
            <li class="blog__nav__item home__link"><a href="/" class="navlink">HOME</a></li>
            <li class="blog__nav__item blog__link"><a href="/blogs/" class="navlink">BLOG</a></li>
            <li class="blog__nav__item projects__link"><a href="/projects/" class="navlink">WORK</a></li>
            <li class="blog__nav__item experiments__link"><a href="/experiments/" class="navlink">LAB</a></li>
            <li class="blog__nav__item tools__link"><a href="/tools/" class="navlink">TOOL</a></li>
        </ul>
    </div>

</header>
<body>
<!-- github ribbon -->
<!--<a href="https://github.com/qddegtya/qddegtya.github.io" target="_blank" id="ribbon--github"><img style="position: absolute; top: 0; left: 0; border: 0;" src="http://xiaoa.name/assets/images/ribbon.png" alt="Fork me on GitHub"></a>-->

<section id="blogbody">
    <div class="clearleft bloglooparea">
        <div class="bloglists">
            <div class="blogbody__everyblog">
                <div class="blogbody__everyblog__header">
                    <i class="fa fa-file-text-o fa-fw fa-lg"></i> <a href="/%E5%AE%9E%E9%AA%8C/2015/03/05/baymax/">SVG+JS实现新版手机QQ的手势消除红点消息的动画</a>
                </div>
                <div class="blogbody__everyblog__meta">
                    <i class="fa fa-calendar fa-fw"></i> <span class="blogbody__everyblog__metainfo">2015 - 03 - 05</span>
                </div>
                <div class="blogcontent blogbody__everyblog__excerpt" id="singleblogcontent">
                    <blockquote>
  <p>下面的配图仅供卖萌</p>
</blockquote>

<p><img src="/assets/blog-images/2015-3-5/baymax.jpg" alt="" /></p>

<p>很久没有写博客了，今天给大家带来一个小折腾。
虽然说是小折腾，但还是废了不少劲，某位大神的博客写得好：
前端工程师要想脱颖而出，就要拿出草稿纸，所以有了如下这个丑陋无比的配图：</p>

<p><strong>以上内容是文章摘要</strong></p>

<p><img src="https://github.com/qddegtya/cute-qq-redpoint/raw/master/paper.jpg" alt="Paper" title="草稿" /></p>

<p>此次折腾的相关信息如下：</p>

<h3 id="cute-qq-redpoint">cute-qq-redpoint</h3>

<p>SVG+JS实现新版手机QQ的手势消除红点消息的动画。
可以打开手机QQ，在底部菜单消息一栏的红点上进行拖拽体验。
本插件欲实现的就是这个效果。</p>

<h3 id="section">原理及部分代码</h3>

<p>做的比较粗糙，但是基本效果已经实现了。
通过计算草稿中四个坐标位置，然后在touchmove中更新path d即可，两条二次贝塞尔曲线是关键。
二次贝塞尔曲线的参考坐标可以轻松得出：
两个圆心相连线的中心即为该参考点。
故得到代码如下：</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="lineno"> 1</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
<span class="lineno"> 2</span>         <span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
<span class="lineno"> 3</span> 
<span class="lineno"> 4</span>         <span class="kd">var</span> <span class="nx">initCircle</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;initCircle&#39;</span><span class="p">);</span>
<span class="lineno"> 5</span>         <span class="kd">var</span> <span class="nx">finalCircle</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;finalCircle&#39;</span><span class="p">);</span>
<span class="lineno"> 6</span>         <span class="kd">var</span> <span class="nx">aPath</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;animationPath&#39;</span><span class="p">);</span>
<span class="lineno"> 7</span> 
<span class="lineno"> 8</span>         <span class="kd">var</span> <span class="nx">touchFingers</span><span class="p">;</span> <span class="c1">//缓存touches队列</span>
<span class="lineno"> 9</span> 
<span class="lineno">10</span>         <span class="c1">//初始圆坐标</span>
<span class="lineno">11</span>         <span class="kd">var</span> <span class="nx">x0</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">initCircle</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;cx&#39;</span><span class="p">));</span>
<span class="lineno">12</span>         <span class="kd">var</span> <span class="nx">y0</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">initCircle</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;cy&#39;</span><span class="p">));</span>
<span class="lineno">13</span>         <span class="kd">var</span> <span class="nx">r0</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">initCircle</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">));</span>
<span class="lineno">14</span> 
<span class="lineno">15</span>         <span class="c1">//最终圆坐标</span>
<span class="lineno">16</span>         <span class="kd">var</span> <span class="nx">x1</span><span class="p">;</span>
<span class="lineno">17</span>         <span class="kd">var</span> <span class="nx">y1</span><span class="p">;</span>
<span class="lineno">18</span>         <span class="kd">var</span> <span class="nx">r1</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">finalCircle</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">));</span>
<span class="lineno">19</span> 
<span class="lineno">20</span>         <span class="c1">//setter</span>
<span class="lineno">21</span>         <span class="nx">Element</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_setter</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">22</span>             <span class="kd">var</span> <span class="nx">attr</span><span class="p">;</span>
<span class="lineno">23</span>             <span class="k">for</span><span class="p">(</span><span class="nx">attr</span> <span class="k">in</span> <span class="nx">options</span><span class="p">){</span>
<span class="lineno">24</span>                 <span class="k">if</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">attr</span><span class="p">)){</span>
<span class="lineno">25</span>                     <span class="k">this</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="nx">attr</span><span class="p">,</span> <span class="nx">options</span><span class="p">[</span><span class="nx">attr</span><span class="p">]);</span>
<span class="lineno">26</span>                 <span class="p">}</span>
<span class="lineno">27</span>             <span class="p">}</span>
<span class="lineno">28</span>         <span class="p">};</span>
<span class="lineno">29</span> 
<span class="lineno">30</span>         <span class="kd">var</span> <span class="nx">updateF</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">updateTouches</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">31</span>             <span class="nx">touchFingers</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">touches</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="lineno">32</span>         <span class="p">};</span>
<span class="lineno">33</span> 
<span class="lineno">34</span> 
<span class="lineno">35</span>         <span class="kd">var</span> <span class="nx">renderThing</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
<span class="lineno">36</span> 
<span class="lineno">37</span>             <span class="nx">x1</span> <span class="o">=</span> <span class="nx">touchFingers</span><span class="p">.</span><span class="nx">clientX</span><span class="p">;</span>
<span class="lineno">38</span>             <span class="nx">y1</span> <span class="o">=</span> <span class="nx">touchFingers</span><span class="p">.</span><span class="nx">clientY</span><span class="p">;</span>
<span class="lineno">39</span> 
<span class="lineno">40</span>             <span class="c1">//二次贝赛尔曲线参考点</span>
<span class="lineno">41</span>             <span class="kd">var</span> <span class="nx">pX</span> <span class="o">=</span> <span class="nx">x0</span> <span class="o">-</span> <span class="p">((</span><span class="nx">x0</span> <span class="o">-</span> <span class="nx">x1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>
<span class="lineno">42</span>             <span class="kd">var</span> <span class="nx">pY</span> <span class="o">=</span> <span class="nx">y0</span> <span class="o">-</span> <span class="p">((</span><span class="nx">y0</span> <span class="o">-</span> <span class="nx">y1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>
<span class="lineno">43</span> 
<span class="lineno">44</span>             <span class="c1">//勾股x,y</span>
<span class="lineno">45</span>             <span class="kd">var</span> <span class="nx">_gX</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">x0</span> <span class="o">-</span> <span class="nx">x1</span><span class="p">);</span>
<span class="lineno">46</span>             <span class="kd">var</span> <span class="nx">_gY</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">y0</span> <span class="o">-</span> <span class="nx">y1</span><span class="p">);</span>
<span class="lineno">47</span> 
<span class="lineno">48</span>             <span class="c1">//勾股定理斜线长度长</span>
<span class="lineno">49</span>             <span class="kd">var</span> <span class="nx">longL</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">_gX</span> <span class="o">*</span> <span class="nx">_gX</span> <span class="o">+</span> <span class="nx">_gY</span> <span class="o">*</span> <span class="nx">_gY</span><span class="p">);</span>
<span class="lineno">50</span> 
<span class="lineno">51</span>             <span class="kd">var</span> <span class="nx">sinX</span> <span class="o">=</span> <span class="nx">_gY</span> <span class="o">/</span> <span class="nx">longL</span><span class="p">;</span>
<span class="lineno">52</span>             <span class="kd">var</span> <span class="nx">cosX</span> <span class="o">=</span> <span class="nx">_gX</span> <span class="o">/</span> <span class="nx">longL</span><span class="p">;</span>
<span class="lineno">53</span> 
<span class="lineno">54</span>             <span class="c1">//四个点的路径构建</span>
<span class="lineno">55</span>             <span class="kd">var</span> <span class="nx">fourPoints</span> <span class="o">=</span> <span class="p">[</span>
<span class="lineno">56</span>                 <span class="s1">&#39;M&#39;</span><span class="p">,</span>
<span class="lineno">57</span>                 <span class="nx">x0</span> <span class="o">+</span> <span class="nx">r0</span> <span class="o">*</span> <span class="nx">sinX</span><span class="p">,</span>
<span class="lineno">58</span>                 <span class="nx">y0</span> <span class="o">+</span> <span class="nx">r0</span> <span class="o">*</span> <span class="nx">cosX</span><span class="p">,</span>
<span class="lineno">59</span>                 <span class="s1">&#39;Q&#39;</span><span class="p">,</span>
<span class="lineno">60</span>                 <span class="nx">pX</span><span class="p">,</span>
<span class="lineno">61</span>                 <span class="nx">pY</span><span class="p">,</span>
<span class="lineno">62</span>                 <span class="nx">x1</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">*</span> <span class="nx">sinX</span><span class="p">,</span>
<span class="lineno">63</span>                 <span class="nx">y1</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">*</span> <span class="nx">cosX</span><span class="p">,</span>
<span class="lineno">64</span>                 <span class="s1">&#39;L&#39;</span><span class="p">,</span>
<span class="lineno">65</span>                 <span class="nx">x1</span> <span class="o">-</span> <span class="nx">r1</span> <span class="o">*</span> <span class="nx">sinX</span><span class="p">,</span>
<span class="lineno">66</span>                 <span class="nx">y1</span> <span class="o">-</span> <span class="nx">r1</span> <span class="o">*</span> <span class="nx">cosX</span><span class="p">,</span>
<span class="lineno">67</span>                 <span class="s1">&#39;Q&#39;</span><span class="p">,</span>
<span class="lineno">68</span>                 <span class="nx">pX</span><span class="p">,</span>
<span class="lineno">69</span>                 <span class="nx">pY</span><span class="p">,</span>
<span class="lineno">70</span>                 <span class="nx">x0</span> <span class="o">-</span> <span class="nx">r0</span> <span class="o">*</span> <span class="nx">sinX</span><span class="p">,</span>
<span class="lineno">71</span>                 <span class="nx">y0</span> <span class="o">-</span> <span class="nx">r0</span> <span class="o">*</span> <span class="nx">cosX</span><span class="p">,</span>
<span class="lineno">72</span>                 <span class="s1">&#39;Z&#39;</span>
<span class="lineno">73</span>             <span class="p">];</span>
<span class="lineno">74</span> 
<span class="lineno">75</span>             <span class="nx">finalCircle</span><span class="p">.</span><span class="nx">_setter</span><span class="p">({</span>
<span class="lineno">76</span>                 <span class="nx">cx</span><span class="o">:</span> <span class="nx">x1</span><span class="p">,</span>
<span class="lineno">77</span>                 <span class="nx">cy</span><span class="o">:</span> <span class="nx">y1</span>
<span class="lineno">78</span>             <span class="p">});</span>
<span class="lineno">79</span> 
<span class="lineno">80</span>             <span class="c1">//设置路径</span>
<span class="lineno">81</span>             <span class="nx">aPath</span><span class="p">.</span><span class="nx">_setter</span><span class="p">({</span>
<span class="lineno">82</span>                 <span class="nx">d</span><span class="o">:</span> <span class="nx">fourPoints</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="lineno">83</span>             <span class="p">});</span>
<span class="lineno">84</span> 
<span class="lineno">85</span>         <span class="p">};</span>
<span class="lineno">86</span> 
<span class="lineno">87</span>         <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchstart&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">88</span>             <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
<span class="lineno">89</span>             <span class="nx">touchFingers</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">touches</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="lineno">90</span>         <span class="p">});</span>
<span class="lineno">91</span> 
<span class="lineno">92</span>         <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchmove&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">93</span>             <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> <span class="c1">//屏蔽掉默认的滚动行为</span>
<span class="lineno">94</span>             <span class="nx">updateF</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
<span class="lineno">95</span>             <span class="nx">renderThing</span><span class="p">();</span>
<span class="lineno">96</span>         <span class="p">});</span>
<span class="lineno">97</span> 
<span class="lineno">98</span> 
<span class="lineno">99</span>     <span class="p">}());</span></code></pre></div>

<h3 id="section-1">演示</h3>

<p>用手机打开
<a href="http://codepen.io/qddegtya/details/EapGWK" title="Demo">codepen在线Demo</a></p>

<h3 id="todo">TODO</h3>

<ol>
  <li>实现弹性系数K，模拟拉断的情况，加入初始圆的半径缩小控制</li>
  <li>插件化处理</li>
</ol>

<h3 id="github">Github</h3>

<p><a href="https://github.com/qddegtya/cute-qq-redpoint" title="源码地址">源码地址</a></p>

                </div>
                <div class="blogbody__everyblog__footer">
                    <div class="footercopyright">
                        <span>本文固定链接</span>
                        <span class="blogperlink">http://xiaoa.name/%E5%AE%9E%E9%AA%8C/2015/03/05/baymax/</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="blogsidebar single__sidebar">
    <div class="avatar--mask">
        <!-- 头像 -->
        <div class="avatar--footer">
            <img src="http://xiaoa.name/assets/images/avatar.jpeg">
        </div>

        <!-- 头像遮罩 -->
        <div class="footer--mask">
            <div class="mask"><i class="fa fa-rocket"></i></div>
        </div>

    </div>
    <!-- 链接区域 -->
    <div class="follow-panel">
        <span class="sns">Theme Version 1.0.34</span>
        <div>
</div>

    </div>
</section>

<footer id="blogfooter">

</footer>

</body>
</html>